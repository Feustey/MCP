# Decision Engine Configuration
# Dernière mise à jour: 15 octobre 2025

# Poids des heuristiques (somme = 1.0)
weights:
  centrality: 0.20      # Position dans le réseau
  liquidity: 0.25       # Équilibre liquidité
  activity: 0.20        # Fréquence de routing
  competitiveness: 0.15 # Prix compétitifs
  reliability: 0.10     # Stabilité et uptime
  age: 0.05            # Ancienneté du canal
  peer_quality: 0.03   # Qualité du pair
  position: 0.02       # Position hub/edge

# Seuils de décision (scores normalisés 0-1)
thresholds:
  optimal_min: 0.7              # Score minimum pour considérer "optimal"
  increase_threshold: 0.3       # En dessous = augmenter fees
  decrease_threshold: 0.5       # Entre 0.3-0.5 = baisser fees
  close_threshold: 0.1          # En dessous = envisager fermeture
  rebalance_ratio_max: 0.8      # Ratio local/total max avant rebalance
  rebalance_ratio_min: 0.2      # Ratio local/total min avant rebalance
  close_inactivity_days: 30     # Jours d'inactivité avant fermeture

# Règles de décision
decision_rules:
  min_confidence: 0.6           # Confiance minimum pour action
  max_fee_increase_ppm: 1000    # Augmentation max en une fois (ppm)
  max_fee_decrease_pct: 0.5     # Baisse max en une fois (50%)
  rebalance_target_ratio: 0.5   # Ratio cible pour rebalance (50/50)

# Limites de sécurité
safety_limits:
  base_fee_msat_min: 0
  base_fee_msat_max: 10000     # 10 sats max
  fee_rate_ppm_min: 1
  fee_rate_ppm_max: 10000      # 1% max
  max_change_percent: 0.5      # ±50% max en une fois

# Rate limiting
rate_limits:
  max_changes_per_day: 5              # Max changements par jour (tous canaux)
  max_changes_per_channel_per_day: 3  # Max changements par canal par jour
  cooldown_minutes: 60                # Temps minimum entre 2 changements

# Règles de rebalance
rebalance_rules:
  max_amount_percent: 0.5      # 50% de capacité max
  max_cost_percent: 0.005      # 0.5% du montant max
  min_amount_sats: 100000      # 100k sats minimum

# Canaux blacklistés (ne jamais toucher)
blacklist_channels: []
  # - "123456x789x0"
  # - "234567x890x1"

# Profils prédéfinis (pour ajustements rapides)
profiles:
  conservative:
    weights:
      centrality: 0.15
      liquidity: 0.30
      activity: 0.15
      competitiveness: 0.10
      reliability: 0.20
      age: 0.05
      peer_quality: 0.03
      position: 0.02
    thresholds:
      optimal_min: 0.8
      increase_threshold: 0.4
      close_threshold: 0.05
    decision_rules:
      min_confidence: 0.8
      max_fee_increase_ppm: 500
      max_fee_decrease_pct: 0.3
  
  aggressive:
    weights:
      centrality: 0.25
      liquidity: 0.20
      activity: 0.25
      competitiveness: 0.15
      reliability: 0.05
      age: 0.05
      peer_quality: 0.03
      position: 0.02
    thresholds:
      optimal_min: 0.6
      increase_threshold: 0.2
      close_threshold: 0.15
    decision_rules:
      min_confidence: 0.5
      max_fee_increase_ppm: 2000
      max_fee_decrease_pct: 0.7
  
  balanced:
    # Utilise les valeurs par défaut (configuration racine)
    weights: null
    thresholds: null
    decision_rules: null

# Profil actif (conservative, aggressive, balanced)
active_profile: "balanced"
