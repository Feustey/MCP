---
description: Documentation compl√®te de tous les endpoints disponibles en production MCP
globs:
alwaysApply: true
---
# Endpoints API Production MCP
> Derni√®re mise √† jour: 7 janvier 2025

## Vue d'ensemble

Cette documentation liste tous les endpoints disponibles en production pour l'API MCP (Moniteur et Contr√¥leur de Performance Lightning Network).

**Base URL Production**: `https://api.dazno.de` (ou selon configuration nginx)

**Authentification**: La plupart des endpoints n√©cessitent un JWT dans le header `Authorization: Bearer <token>`

**Documentation Interactive**: `/docs` (d√©sactiv√©e en production pour s√©curit√©)

---

## üìã Endpoints Racine

| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `GET` | `/` | Informations API et liens utiles | ‚ùå |
| `GET` | `/info` | Informations syst√®me d√©taill√©es | ‚ùå |

---

## üè• Health & Monitoring

### Health Checks
| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `GET` | `/health` | V√©rification de sant√© basique | ‚ùå |
| `GET` | `/health/detailed` | Sant√© d√©taill√©e avec composants | ‚ùå |
| `GET` | `/health/components` | √âtat individuel des composants | ‚ùå |
| `GET` | `/health/metrics` | M√©triques de sant√© | ‚ùå |
| `GET` | `/health/ready` | Probe de disponibilit√© (Kubernetes/Docker) | ‚ùå |
| `GET` | `/health/live` | Probe de vitalit√© (Kubernetes/Docker) | ‚ùå |
| `GET` | `/health/redis` | √âtat sp√©cifique de Redis | ‚ùå |
| `POST` | `/health/reset` | R√©initialisation des m√©triques | ‚úÖ |

### M√©triques
| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `GET` | `/metrics/` | M√©triques g√©n√©rales | ‚ùå |
| `GET` | `/metrics/detailed` | M√©triques d√©taill√©es | ‚ùå |
| `GET` | `/metrics/prometheus` | Export Prometheus | ‚ùå |
| `GET` | `/metrics/circuit-breakers` | √âtat des circuit breakers | ‚ùå |
| `GET` | `/metrics/errors` | Statistiques d'erreurs | ‚ùå |
| `GET` | `/metrics/performance` | M√©triques de performance | ‚ùå |
| `GET` | `/metrics/redis` | M√©triques Redis | ‚ùå |
| `GET` | `/metrics/dashboard` | Dashboard m√©triques complet | ‚ùå |
| `POST` | `/metrics/reset` | R√©initialisation m√©triques | ‚úÖ |

---

## üí∞ Wallet Lightning (LNbits)

| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `GET` | `/api/v1/wallet/balance` | Solde du portefeuille Lightning | ‚úÖ |
| `GET` | `/api/v1/wallet/transactions` | Historique des transactions | ‚úÖ |
| `POST` | `/api/v1/wallet/invoice` | Cr√©er une facture Lightning (BOLT11) | ‚úÖ |
| `POST` | `/api/v1/wallet/pay` | Payer une facture Lightning | ‚úÖ |

---

## üîó Gestion des Canaux

| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `GET` | `/api/v1/channels/recommendations/amboss` | Recommandations depuis Amboss Space | ‚úÖ |
| `GET` | `/api/v1/channels/recommendations/unified` | Recommandations unifi√©es multi-sources | ‚úÖ |

---

## üåê Gestion des N≈ìuds

| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `POST` | `/api/v1/nodes/` | Cr√©er un nouveau n≈ìud | ‚úÖ |
| `GET` | `/api/v1/nodes/` | Lister les n≈ìuds du tenant | ‚úÖ |
| `GET` | `/api/v1/nodes/{node_id}` | Obtenir un n≈ìud sp√©cifique (ID ou pubkey) | ‚úÖ |
| `PATCH` | `/api/v1/nodes/{node_id}` | Mettre √† jour un n≈ìud | ‚úÖ |
| `DELETE` | `/api/v1/nodes/{node_id}` | Supprimer un n≈ìud | ‚úÖ |

### Endpoints Node Sp√©cifiques
| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `GET` | `/api/v1/node/{node_id}/priorities-enhanced` | Priorit√©s am√©lior√©es | ‚úÖ |
| `GET` | `/api/v1/node/{node_id}/status/complete` | Statut complet du n≈ìud | ‚úÖ |
| `GET` | `/api/v1/node/{node_id}/lnd/status` | Statut LND du n≈ìud | ‚úÖ |
| `GET` | `/api/v1/node/{node_id}/info/amboss` | Informations depuis Amboss | ‚úÖ |

---

## ‚ö° Lightning Network (Analyse Avanc√©e)

### Exploration & Statistiques
| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `GET` | `/api/v1/lightning/explorer/nodes` | Explorer les n≈ìuds | ‚ùå |
| `GET` | `/api/v1/lightning/rankings` | Classements r√©seau | ‚ùå |
| `GET` | `/api/v1/lightning/network/global-stats` | Statistiques r√©seau globales | ‚ùå |
| `GET` | `/api/v1/lightning/calculator` | Calculateur Lightning | ‚ùå |
| `GET` | `/api/v1/lightning/decoder` | D√©codeur BOLT11 | ‚ùå |

### Analyse de N≈ìuds
| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `GET` | `/api/v1/lightning/nodes/{node_pubkey}/enhanced-analysis` | Analyse enrichie d'un n≈ìud | ‚ùå |
| `GET` | `/api/v1/lightning/nodes/{node_pubkey}/centrality-metrics` | M√©triques de centralit√© | ‚ùå |
| `GET` | `/api/v1/lightning/nodes/{node_pubkey}/financial-analysis` | Analyse financi√®re | ‚ùå |
| `GET` | `/api/v1/lightning/nodes/{node_pubkey}/performance-score` | Score de performance | ‚ùå |
| `GET` | `/api/v1/lightning/nodes/{node_pubkey}/liquidity-recommendations` | Recommandations de liquidit√© | ‚ùå |
| `POST` | `/api/v1/lightning/nodes/{node_pubkey}/optimize-fees` | Optimisation des frais | ‚úÖ |

### Analyse R√©seau
| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `GET` | `/api/v1/lightning/max-flow/{source_node}/{target_node}` | Analyse max-flow entre deux n≈ìuds | ‚ùå |
| `GET` | `/api/v1/lightning/payment-probability/{source_node}/{target_node}` | Probabilit√© de succ√®s paiement | ‚ùå |
| `GET` | `/api/v1/lightning/network/topology-analysis` | Analyse de topologie r√©seau | ‚ùå |
| `GET` | `/api/v1/lightning/network/hub-analysis` | Analyse des hubs r√©seau | ‚ùå |

---

## üìä Analytics DazFlow

| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `GET` | `/analytics/dazflow/node/{node_id}` | Indice DazFlow pour un n≈ìud | ‚ùå |
| `GET` | `/analytics/dazflow/reliability-curve/{node_id}` | Courbe de fiabilit√© des paiements | ‚ùå |
| `GET` | `/analytics/dazflow/bottlenecks/{node_id}` | Identification des goulots d'√©tranglement | ‚ùå |
| `GET` | `/analytics/dazflow/network-health` | Sant√© globale du r√©seau | ‚ùå |
| `POST` | `/analytics/dazflow/optimize-liquidity/{node_id}` | Optimisation de liquidit√© | ‚úÖ |

---

## üîç Syst√®me RAG (Retrieval-Augmented Generation)

### Requ√™tes & Recherche
| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `POST` | `/api/v1/rag/query` | Requ√™te RAG avec contexte Lightning | ‚úÖ |
| `GET` | `/api/v1/rag/stats` | Statistiques du syst√®me RAG | ‚ùå |
| `GET` | `/api/v1/rag/history` | Historique des requ√™tes (pagination) | ‚ùå |
| `GET` | `/api/v1/rag/health` | Sant√© du syst√®me RAG | ‚ùå |

### Indexation & Ingestion
| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `POST` | `/api/v1/rag/index` | Indexer du contenu | ‚úÖ |
| `POST` | `/api/v1/rag/index-file` | Indexer un fichier | ‚úÖ |
| `POST` | `/api/v1/rag/ingest` | Ingestion de documents avec m√©tadonn√©es | ‚úÖ |
| `POST` | `/api/v1/rag/reindex` | R√©indexer le syst√®me | ‚úÖ |

### Analyse & Validation
| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `POST` | `/api/v1/rag/analyze/node` | Analyse compl√®te d'un n≈ìud avec RAG | ‚úÖ |
| `POST` | `/api/v1/rag/validate` | Valider du contenu (config/report/recommendation) | ‚úÖ |
| `POST` | `/api/v1/rag/benchmark` | Ex√©cuter des benchmarks | ‚úÖ |

### Workflows & Assets
| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `POST` | `/api/v1/rag/workflow/execute` | Ex√©cuter un workflow RAG (sync/async) | ‚úÖ |
| `GET` | `/api/v1/rag/assets/list` | Lister tous les assets RAG | ‚úÖ |
| `GET` | `/api/v1/rag/assets/{asset_id}` | R√©cup√©rer un asset RAG sp√©cifique | ‚úÖ |

### Cache
| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `DELETE` | `/api/v1/rag/clear-cache` | Vider le cache RAG | ‚úÖ |
| `GET` | `/api/v1/rag/cache/stats` | Statistiques du cache RAG | ‚úÖ |

---

## ü§ñ Chatbot IA

| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `POST` | `/api/v1/chatbot/ask` | Poser une question au chatbot intelligent | ‚úÖ |
| `GET` | `/api/v1/chatbot/node-summary/{node_pubkey}` | R√©sum√© d'un n≈ìud par le chatbot | ‚úÖ |
| `POST` | `/api/v1/chatbot/conversation/context` | Ajouter du contexte √† la conversation | ‚úÖ |

---

## ‚öôÔ∏è Optimisation de Frais

| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `POST` | `/api/v1/fee-optimizer/optimize` | Lancer une optimisation de frais | ‚úÖ |
| `GET` | `/api/v1/fee-optimizer/updates` | Historique des mises √† jour de frais | ‚úÖ |
| `POST` | `/api/v1/fee-optimizer/rollback` | Rollback des changements de frais | ‚úÖ |
| `GET` | `/api/v1/fee-optimizer/status` | Statut de l'optimiseur | ‚úÖ |
| `GET` | `/api/v1/fee-optimizer/recommendations` | Recommandations d'optimisation | ‚úÖ |

---

## üëÅÔ∏è Shadow Dashboard

| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `GET` | `/shadow-dashboard/status` | Statut du shadow mode | ‚úÖ |
| `GET` | `/shadow-dashboard/decisions` | Liste des d√©cisions prises | ‚úÖ |
| `GET` | `/shadow-dashboard/report/{date}` | Rapport d√©taill√© par date | ‚úÖ |
| `GET` | `/shadow-dashboard/summary` | R√©sum√© des activit√©s shadow | ‚úÖ |
| `POST` | `/shadow-dashboard/validate/{decision_id}` | Valider une d√©cision shadow | ‚úÖ |
| `GET` | `/shadow-dashboard/metrics` | M√©triques du shadow mode | ‚úÖ |

---

## üß† Intelligence & Recommendations

| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `GET` | `/api/v1/intelligence/health` | Sant√© du syst√®me d'intelligence | ‚ùå |
| `GET` | `/api/v1/intelligence/node/{pubkey}/info` | Informations intelligentes d'un n≈ìud | ‚úÖ |
| `GET` | `/api/v1/intelligence/node/{pubkey}/recommendations` | Recommandations intelligentes | ‚úÖ |
| `POST` | `/api/v1/intelligence/node/{pubkey}/priorities` | Priorit√©s d'actions pour un n≈ìud | ‚úÖ |
| `POST` | `/api/v1/intelligence/nodes/bulk-analysis` | Analyse en masse de plusieurs n≈ìuds | ‚úÖ |
| `GET` | `/api/v1/intelligence/metrics` | M√©triques de performance intelligence | ‚úÖ |

### Intelligence Avanc√©e (src/api)
| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `POST` | `/api/v1/intelligence/node/analyze` | Analyser un n≈ìud avec IA | ‚úÖ |
| `POST` | `/api/v1/intelligence/network/analyze` | Analyser le r√©seau avec IA | ‚úÖ |
| `POST` | `/api/v1/intelligence/optimization/recommend` | Recommandations d'optimisation IA | ‚úÖ |
| `POST` | `/api/v1/intelligence/prediction/generate` | G√©n√©rer des pr√©dictions | ‚úÖ |
| `POST` | `/api/v1/intelligence/comparative/analyze` | Analyse comparative IA | ‚úÖ |
| `POST` | `/api/v1/intelligence/alerts/configure` | Configurer des alertes intelligentes | ‚úÖ |
| `GET` | `/api/v1/intelligence/insights/summary` | R√©sum√© des insights | ‚úÖ |
| `POST` | `/api/v1/intelligence/workflow/automated` | Workflow automatis√© IA | ‚úÖ |
| `GET` | `/api/v1/intelligence/health/intelligence` | Sant√© du syst√®me intelligence | ‚úÖ |

---

## üìà Lightning Scoring

| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `GET` | `/api/v1/scoring/node/{node_pubkey}` | Score de performance d'un n≈ìud | ‚úÖ |
| `POST` | `/api/v1/scoring/compare` | Comparer des n≈ìuds | ‚úÖ |
| `GET` | `/api/v1/scoring/channels/{channel_id}` | Score d'un canal sp√©cifique | ‚úÖ |
| `POST` | `/api/v1/scoring/optimize` | Optimisation bas√©e sur score | ‚úÖ |
| `GET` | `/api/v1/scoring/network` | Score global du r√©seau | ‚úÖ |
| `POST` | `/api/v1/scoring/recommendations` | Recommandations bas√©es sur scores | ‚úÖ |

---

## üéÅ Token4Good (T4G)

### Utilisateurs
| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `POST` | `/api/v1/token4good/users` | Cr√©er un profil utilisateur | ‚ùå |
| `GET` | `/api/v1/token4good/users/{user_id}` | Profil utilisateur | ‚ùå |
| `GET` | `/api/v1/token4good/users/{user_id}/statistics` | Statistiques utilisateur | ‚ùå |
| `GET` | `/api/v1/token4good/users/{user_id}/opportunities` | Opportunit√©s de gains | ‚ùå |
| `GET` | `/api/v1/token4good/leaderboard` | Classement g√©n√©ral | ‚ùå |

### Tokens
| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `POST` | `/api/v1/token4good/tokens/award` | Attribuer des tokens | ‚úÖ |
| `GET` | `/api/v1/token4good/tokens/{user_id}/balance` | Solde de tokens | ‚ùå |
| `GET` | `/api/v1/token4good/tokens/{user_id}/transactions` | Historique transactions tokens | ‚ùå |

### Mentorat
| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `POST` | `/api/v1/token4good/mentoring/sessions` | Cr√©er une session de mentorat | ‚úÖ |
| `POST` | `/api/v1/token4good/mentoring/sessions/complete` | Compl√©ter une session | ‚úÖ |
| `GET` | `/api/v1/token4good/mentoring/sessions/{user_id}` | Sessions d'un utilisateur | ‚ùå |

### Marketplace
| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `POST` | `/api/v1/token4good/marketplace/services` | Cr√©er un service | ‚úÖ |
| `POST` | `/api/v1/token4good/marketplace/search` | Rechercher des services | ‚ùå |
| `POST` | `/api/v1/token4good/marketplace/book` | R√©server un service | ‚úÖ |
| `POST` | `/api/v1/token4good/marketplace/bookings/complete` | Compl√©ter une r√©servation | ‚úÖ |
| `GET` | `/api/v1/token4good/marketplace/bookings/{user_id}` | R√©servations d'un utilisateur | ‚ùå |
| `GET` | `/api/v1/token4good/marketplace/recommendations/{user_id}` | Recommandations marketplace | ‚ùå |
| `GET` | `/api/v1/token4good/marketplace/stats` | Statistiques marketplace | ‚ùå |

### Administration T4G
| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `POST` | `/api/v1/token4good/admin/rewards/weekly-bonuses` | Distribuer bonus hebdomadaires | ‚úÖ Admin |
| `GET` | `/api/v1/token4good/admin/system/status` | Statut syst√®me T4G | ‚úÖ Admin |

### Lightning Integration T4G
| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `POST` | `/api/v1/token4good/lightning/invoice/create` | Cr√©er facture Lightning | ‚úÖ |
| `GET` | `/api/v1/token4good/lightning/balance` | Solde Lightning | ‚úÖ |
| `POST` | `/api/v1/token4good/lightning/invoice/pay` | Payer une facture | ‚úÖ |
| `GET` | `/api/v1/token4good/lightning/invoice/check/{payment_hash}` | V√©rifier paiement | ‚úÖ |
| `GET` | `/api/v1/token4good/lightning/node/info` | Informations n≈ìud Lightning | ‚úÖ |
| `GET` | `/api/v1/token4good/lightning/channels` | Liste des canaux | ‚úÖ |
| `GET` | `/api/v1/token4good/lightning/status` | Statut Lightning | ‚úÖ |

---

## üåê Network Analysis

| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `GET` | `/api/v1/network/summary` | R√©sum√© du r√©seau | ‚úÖ |
| `GET` | `/api/v1/network/centralities` | Centralit√©s r√©seau | ‚úÖ |
| `GET` | `/api/v1/network/node/{node_id}/stats` | Statistiques d'un n≈ìud | ‚úÖ |
| `GET` | `/api/v1/network/node/{node_id}/history` | Historique d'un n≈ìud | ‚úÖ |
| `POST` | `/api/v1/network/node/{node_id}/optimize` | Optimiser un n≈ìud r√©seau | ‚úÖ |

---

## ü§ñ Automation

| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `POST` | `/api/v1/automation/fee-update` | Mise √† jour automatique de frais | ‚úÖ |
| `POST` | `/api/v1/automation/rebalance` | R√©√©quilibrage automatique | ‚úÖ |
| `POST` | `/api/v1/automation/custom-rebalance` | R√©√©quilibrage personnalis√© | ‚úÖ |
| `GET` | `/api/v1/automation/history` | Historique d'automatisation | ‚úÖ |
| `GET` | `/api/v1/automation/config` | Configuration automatisation | ‚úÖ |

---

## üì¶ API v1 Routes (config/routes/api.py)

### Routes Publiques
| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `GET` | `/api/v1/health` | Sant√© API | ‚ùå |
| `GET` | `/api/v1/` | Informations API racine | ‚ùå |

### Routes Prot√©g√©es
| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `GET` | `/api/v1/status` | Statut syst√®me | ‚úÖ |
| `POST` | `/api/v1/simulate/node` | Simuler un n≈ìud | ‚úÖ |
| `GET` | `/api/v1/simulate/profiles` | Profils de simulation | ‚úÖ |
| `POST` | `/api/v1/optimize/node/{node_id}` | Optimiser un n≈ìud | ‚úÖ |

### Administration API v1
| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `GET` | `/api/v1/admin/metrics` | M√©triques admin | ‚úÖ Admin |
| `POST` | `/api/v1/admin/maintenance` | Mode maintenance | ‚úÖ Admin |

### Monitoring API v1
| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `GET` | `/api/v1/metrics` | M√©triques API | ‚úÖ |

### Stockage API v1
| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `POST` | `/api/v1/storage/upload` | Upload fichier | ‚úÖ |
| `GET` | `/api/v1/storage/download` | T√©l√©charger fichier | ‚úÖ |

---

## üî¥ RGB Endpoints (conditionnel)

| M√©thode | Endpoint | Description | Auth |
|---------|----------|-------------|------|
| `GET` | `/api/v1/rgb/assets/list` | Liste des assets RGB | ‚úÖ |
| `POST` | `/api/v1/rgb/assets/create` | Cr√©er un asset RGB | ‚úÖ |
| `GET` | `/api/v1/rgb/assets/{asset_id}` | R√©cup√©rer un asset | ‚úÖ |
| `POST` | `/api/v1/rgb/transactions/create` | Cr√©er une transaction RGB | ‚úÖ |
| `GET` | `/api/v1/rgb/transactions/{transaction_id}` | Transaction RGB | ‚úÖ |
| `POST` | `/api/v1/rgb/contracts/create` | Cr√©er un contrat RGB | ‚úÖ |
| `GET` | `/api/v1/rgb/contracts/list` | Liste des contrats | ‚úÖ |
| `POST` | `/api/v1/rgb/validate/transaction` | Valider une transaction | ‚úÖ |
| `POST` | `/api/v1/rgb/validate/contract` | Valider un contrat | ‚úÖ |
| `POST` | `/api/v1/rgb/lightning/channel/rgb` | Canal Lightning RGB | ‚úÖ |
| `GET` | `/api/v1/rgb/lightning/channels/{node_pubkey}` | Canaux RGB d'un n≈ìud | ‚úÖ |
| `GET` | `/api/v1/rgb/health` | Sant√© RGB | ‚ùå |
| `GET` | `/api/v1/rgb/stats` | Statistiques RGB | ‚ùå |

---

## üîê Authentification & S√©curit√©

### M√©thode d'authentification
Tous les endpoints marqu√©s `‚úÖ` n√©cessitent un **JWT Bearer token** dans le header :
```
Authorization: Bearer <token>
```

### Extraction du tenant
Les endpoints utilisent `verify_jwt_and_get_tenant()` pour extraire le `tenant_id` du JWT et isoler les donn√©es par tenant (multi-tenant).

### Permissions
- **‚úÖ**: Authentification JWT requise
- **‚úÖ Admin**: Authentification + permissions administrateur
- **‚ùå**: Endpoint public (pas d'authentification)

### CORS
Origines autoris√©es en production :
- `https://app.dazno.de`
- `https://dazno.de`
- `https://www.dazno.de`
- `https://t4g.dazno.de`

### Rate Limiting
Protection contre le spam activ√©e sur tous les endpoints.

---

## üìù Notes Importantes

1. **Documentation Swagger**: D√©sactiv√©e en production (`/docs` retourne 404) pour des raisons de s√©curit√©
2. **Version API**: Tous les endpoints sont versionn√©s avec `/api/v1`
3. **Format R√©ponses**: JSON uniquement
4. **Gestion d'erreurs**: Format standardis√© avec `error`, `message`, `request_id`
5. **Multi-tenant**: Isolation stricte des donn√©es par `tenant_id` extrait du JWT
6. **Endpoints conditionnels**: Certains endpoints (RGB, Chatbot) peuvent ne pas √™tre disponibles selon la configuration
7. **Shadow Mode**: L'optimiseur de frais fonctionne en mode shadow par d√©faut (dry-run)
8. **M√©triques Prometheus**: Disponibles sur `/metrics/prometheus` pour int√©gration Grafana

---

## üîó R√©f√©rences

- **Architecture API**: [.cursor/rules/api-architecture.mdc](mdc:.cursor/rules/api-architecture.mdc)
- **Point d'entr√©e principal**: [app/main.py](mdc:app/main.py)
- **Configuration routes**: [config/routes/api.py](mdc:config/routes/api.py)
- **Nginx Production**: [nginx-docker.conf](mdc:nginx-docker.conf)
