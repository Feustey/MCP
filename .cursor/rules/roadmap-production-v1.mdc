---
description: Roadmap de production MCP v1.0 - Plan d'ex√©cution complet
globs:
alwaysApply: true
---
# Roadmap Production MCP v1.0

## R√©f√©rence principale

Consulter [_SPECS/Roadmap-Production-v1.0.md](mdc:_SPECS/Roadmap-Production-v1.0.md) pour le plan complet et d√©taill√© vers la production stable.

## Vue d'ensemble

Ce document d√©finit la roadmap compl√®te pour MCP v1.0 production-ready, structur√©e en 4 priorit√©s sur 15 semaines :

### Priorit√©s

1. **Infrastructure Stable (S+0 √† S+2)** - üî¥ CRITIQUE
   - Configuration Nginx/HTTPS/Systemd
   - Reconstruction image Docker propre
   - Activation MongoDB Atlas et Redis Cloud
   - Mode d√©grad√© et fallback

2. **Core Engine Complet (S+2 √† S+5)** - üî¥ CRITIQUE
   - Int√©gration LNBits r√©elle (macaroon, policies)
   - Heuristiques avanc√©es (8 heuristiques)
   - Decision engine avec rollback transactionnel
   - Lightning Scoring Service activ√©

3. **Production Contr√¥l√©e (S+5 √† S+9)** - üü° HAUTE
   - Shadow Mode 21 jours minimum
   - Tests avec n≈ìud r√©el (1 canal ‚Üí expansion)
   - Activation 5 n≈ìuds en mode semi-auto
   - Monitoring et alertes multi-niveaux

4. **Fonctionnalit√©s Avanc√©es (S+9 √† S+15)** - üü¢ MOYENNE
   - Syst√®me RAG Lightning complet
   - Int√©grations externes (Amboss, Mempool, 1ML)
   - Monitoring Prometheus + Grafana
   - Performance & Scaling (cache, pools, background tasks)

## P√©rim√®tre v1.0

**Inclus** :
- Infrastructure cloud-native stable
- Core Engine d'optimisation fees complet avec LND/LNBits r√©els
- Mode Shadow valid√© et production contr√¥l√©e (5 n≈ìuds)
- Monitoring et observabilit√© complets
- APIs et services avanc√©s (RAG, Scoring)

**Exclu (report√© en V2)** :
- Packaging Umbrel
- Installation locale-first
- Distribution app store Umbrel

> Voir [_SPECS/V2.md](mdc:_SPECS/V2.md) pour les fonctionnalit√©s report√©es en V2

## Objectifs de Qualit√©

```yaml
Performance:
  - API uptime: > 99.5%
  - Response time p95: < 500ms
  - Error rate: < 0.5%
  - Cache hit rate: > 85%

Fonctionnalit√©:
  - Optimizations/jour: > 50
  - Nodes actifs: > 5
  - Success rate optimizations: > 95%

Business:
  - Am√©lioration moyenne fees: > +15%
  - Am√©lioration forward rate: > +20%
  - Satisfaction node operators: > 80%
  - Faux positifs: < 5%

Qualit√©:
  - Code coverage: > 85%
  - Tests passing: 100%
  - S√©curit√©: 0 vuln√©rabilit√©s critiques
```

## Conventions d'Impl√©mentation

### Structure des T√¢ches

Chaque t√¢che dans la roadmap suit ce format :

```yaml
Responsable: R√¥le assign√©
Dur√©e: Estimation
Pr√©requis: D√©pendances

Actions:
  - Action 1
  - Action 2

Crit√®res de succ√®s:
  - ‚úÖ Crit√®re mesurable 1
  - ‚úÖ Crit√®re mesurable 2

Fichiers:
  - chemin/fichier1.py (action)
  - chemin/fichier2.py (nouveau)
```

### Nommage des Fichiers

- **Nouveaux modules** : Pr√©fixer clairement (ex: `shadow_mode_logger.py`, `approval_workflow.py`)
- **Configurations** : Dans `/config` avec suffixe clair (ex: `decision_thresholds.yaml`, `rag_config.yaml`)
- **Scripts** : Dans `/scripts` avec nom explicite (ex: `deploy_docker_production.sh`, `daily_shadow_report.py`)
- **Tests** : Pr√©fixer par `test_` (ex: `test_lnbits_client.py`)

### Documentation

Chaque nouvelle fonctionnalit√© majeure doit inclure :
- Docstrings compl√®tes (Google style)
- Tests unitaires (coverage > 90%)
- Documentation utilisateur si API publique
- Mise √† jour du changelog

## Milestones Critiques

| Date | Milestone | Go/No-Go Decision |
|------|-----------|-------------------|
| **S+2** | Infrastructure Stable | API HTTPS accessible, Docker stable, services cloud connect√©s |
| **S+5** | Core Engine Complet | LNBits int√©gr√©, heuristiques valid√©es, rollback test√© |
| **S+9** | Shadow Mode Valid√© | 21j observation, validation experts > 80%, tests pilotes OK |
| **S+12** | Production Limit√©e | 5 n≈ìuds actifs, 0 incidents critiques, satisfaction > 80% |
| **S+15** | v1.0 Release | Tous crit√®res de succ√®s atteints, documentation compl√®te |

## Checklist Before Starting

Avant de commencer une t√¢che de la roadmap, v√©rifier :

1. **Pr√©requis** : Tous les pr√©requis de la t√¢che sont satisfaits
2. **Environnement** : Dev environment configur√© et test√©
3. **D√©pendances** : Packages/services requis disponibles
4. **Tests** : Framework de tests en place
5. **Documentation** : Templates documentaires disponibles

## Workflow de D√©veloppement

1. **Prendre une t√¢che** : Choisir dans la priorit√© courante
2. **Cr√©er une branche** : `feature/P{priorit√©}-{nom-tache}`
3. **Impl√©menter** : Suivre les crit√®res de succ√®s
4. **Tests** : √âcrire et valider tests (coverage > 90%)
5. **Documentation** : Documenter code et usage
6. **Review** : Code review par pair
7. **Merge** : Uniquement si tous crit√®res OK

## Gestion des Risques

Pour chaque t√¢che critique, anticiper :
- **Plan B** : Alternative si blocage technique
- **Fallback** : D√©gradation gracieuse possible
- **Rollback** : Proc√©dure de retour arri√®re document√©e
- **Monitoring** : M√©triques de succ√®s d√©finies

## Budget et Ressources

### Budget Mensuel Estim√©
- Services Cloud : ~$160/mois
- APIs Externes : ~$100-700/mois
- Infrastructure : ~$20-70/mois
- **Total** : $280-930/mois

### Ressources Humaines
- Backend Dev : 1.0-2.0 FTE
- DevOps : 0.5-1.0 FTE
- ML Engineer : 0-1.0 FTE (P4 uniquement)
- QA : 0.5-1.0 FTE
- **Moyenne** : ~3 FTE sur 15 semaines

## R√©f√©rences Rapides

### Documents Associ√©s
- [Plan MVP original](mdc:_SPECS/Plan-MVP.md)
- [Backbone technique](mdc:docs/backbone-technique-MVP.md)
- [V2 Features](mdc:_SPECS/V2.md)
- [Plan LNBits](mdc:_SPECS/Plan-lnbits.md)
- [Hosting Strategy](mdc:_SPECS/hosting.md)

### Code Cl√©
- Core Optimizer : [src/optimizers/core_fee_optimizer.py](mdc:src/optimizers/core_fee_optimizer.py)
- LNBits Client : [src/clients/lnbits_client.py](mdc:src/clients/lnbits_client.py)
- Lightning Scoring : [app/services/lightning_scoring.py](mdc:app/services/lightning_scoring.py)
- Monitoring : [monitor_production.py](mdc:monitor_production.py)

### Scripts Utiles
- [scripts/configure_nginx_production.sh](mdc:scripts/configure_nginx_production.sh)
- [scripts/configure_systemd_autostart.sh](mdc:scripts/configure_systemd_autostart.sh)

## Suivi d'Avancement

Pour suivre l'avancement du projet :
1. Consulter [PHASE5-STATUS.md](mdc:PHASE5-STATUS.md) pour l'√©tat actuel
2. V√©rifier les milestones atteints dans la roadmap
3. Mettre √† jour les statuts des t√¢ches (‚úÖ/üîÑ/‚ùå)
4. Documenter les blocages et solutions

## Support

En cas de question sur la roadmap :
1. **Technique** : Consulter la section d√©taill√©e dans [Roadmap-Production-v1.0.md](mdc:_SPECS/Roadmap-Production-v1.0.md)
2. **Business** : Contacter Product Owner
3. **Architectural** : R√©f√©rer au [backbone technique](mdc:docs/backbone-technique-MVP.md)

---

**Note** : Cette roadmap est un document vivant. Chaque phase termin√©e doit √™tre suivie d'une r√©trospective et d'ajustements si n√©cessaire.
