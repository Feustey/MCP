# Configuration Ollama pour MCP RAG
# Copier ce fichier vers .env et ajuster les valeurs

# ============================================
# RAG PROVIDER (IMPORTANT!)
# ============================================
LLM_PROVIDER=ollama

# ============================================
# OLLAMA CONFIGURATION
# ============================================
OLLAMA_URL=http://ollama:11434
OLLAMA_NUM_PARALLEL=1
OLLAMA_KEEP_ALIVE=30m

# ============================================
# MODÈLES OLLAMA
# ============================================
# Génération principale (production)
GEN_MODEL=llama3:70b-instruct-2025-07-01

# Génération fallback (en cas d'erreur/timeout)
GEN_MODEL_FALLBACK=llama3:8b-instruct

# Embeddings (dimensionnalité fixe)
EMBED_MODEL=nomic-embed-text
EMBED_DIMENSION=768
EMBED_VERSION=2025-10-15

# ============================================
# PARAMÈTRES GÉNÉRATION
# ============================================
GEN_TEMPERATURE=0.2
GEN_TOP_P=0.9
GEN_MAX_TOKENS=1536
GEN_NUM_CTX=8192

# ============================================
# PARAMÈTRES RETRIEVAL
# ============================================
RAG_TOPK=8
RAG_RERANK_TOP=3
RAG_CONFIDENCE_THRESHOLD=0.35

# ============================================
# CACHE REDIS (TTL en secondes)
# ============================================
CACHE_TTL_RETRIEVAL=86400   # 24h
CACHE_TTL_ANSWER=21600      # 6h
CACHE_TTL_EMBED=604800      # 7 jours

# ============================================
# RETRY ET RESILIENCE
# ============================================
MAX_RETRIES=3
RETRY_BACKOFF=1.0
CIRCUIT_BREAKER_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT=60

# ============================================
# BASE DE DONNÉES
# ============================================
MONGO_URL=mongodb://localhost:27017
MONGODB_DB=rag_db
MONGODB_COLLECTION_DOCS=documents
MONGODB_COLLECTION_QUERIES=query_history

REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=

# ============================================
# LIGHTNING / LNBITS
# ============================================
LNBITS_URL=https://your-lnbits-server.com
LNBITS_ADMIN_KEY=your-admin-key
LNBITS_INKEY=your-invoice-key

# ============================================
# SÉCURITÉ
# ============================================
JWT_SECRET=your-jwt-secret-min-32-chars
SECRET_KEY=your-secret-key-min-32-chars
API_KEY=your-api-key

# ============================================
# MONITORING ET LOGS
# ============================================
LOG_LEVEL=INFO
LOG_FORMAT=json
ENABLE_METRICS=true
METRICS_PORT=9090
ENABLE_TRACING=true

# ============================================
# API
# ============================================
API_VERSION=2025-10-15
API_PREFIX=/api/v1
ENABLE_AUTH=true
ENABLE_RATE_LIMIT=true
RATE_LIMIT_PER_MINUTE=60

# ============================================
# ENVIRONNEMENT
# ============================================
ENVIRONMENT=production
DEBUG=false
HOST=0.0.0.0
PORT=8000
WORKERS=4

